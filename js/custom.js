!function a(o,s,l){function c(e,t){if(!s[e]){if(!o[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(u)return u(e,!0);var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}var r=s[e]={exports:{}};o[e][0].call(r.exports,function(t){return c(o[e][1][t]||t)},r,r.exports,a,o,s,l)}return s[e].exports}for(var u="function"==typeof require&&require,t=0;t<l.length;t++)c(l[t]);return c}({1:[function(t,e,n){"use strict";var i=t("./prmFacetExactAfter/customTLevelFacette"),r=t("./prmLoginAfter/authentificationAutresInst"),a=t("./prmBriefResultAfter/customBriefDisplay"),o=t("./prmGalleryItemAfter/customGalleryDisplay"),s=t("./prmSearchResultAvailabilityLineAfter/affDispo"),l=t("./prmFullViewServiceContainerAfter/dispoElecAutresInst"),c=t("./prmLoanAfter/itemInLoan"),u=(t("./prmSearchBarAfter/showAlertMessage"),t("./prmSearchResultThumbnailContainerAfter/getThumbnail"),t("./prmAuthenticationAfter/forceAuth")),p=t("./prmExploreFooterAfter/logosInsts"),f=t("./prmTopbarAfter/message.service"),d=t("./prmTopbarAfter/prmTopbarAfter.component"),m=angular.module("centralCustom",[]);m&&(m.component("prmFacetExactAfter",i.tLevelFacetteConfig),m.component("prmLoginAfter",r.authentificationAutresInstConfig),m.component("prmBriefResultAfter",a.customBriefDisplayConfig),m.component("prmGalleryItemAfter",o.customGalleryDisplayConfig),m.component("prmSearchResultAvailabilityLineAfter",s.affDispoConfig),m.component("prmFullViewServiceContainerAfter",l.dispoElecAutresInstConfig),m.component("prmLoanAfter",c.itemInLoanConfig),m.component("prmAuthenticationAfter",u.forceAuthConfig),m.component("prmExploreFooterAfter",p.logosInstsConfig),m.service("messageService",f.MessageService),m.component(d.PrmTopbarAfterConfig.name,d.PrmTopbarAfterConfig.config))},{"./prmAuthenticationAfter/forceAuth":2,"./prmBriefResultAfter/customBriefDisplay":3,"./prmExploreFooterAfter/logosInsts":4,"./prmFacetExactAfter/customTLevelFacette":5,"./prmFullViewServiceContainerAfter/dispoElecAutresInst":6,"./prmGalleryItemAfter/customGalleryDisplay":7,"./prmLoanAfter/itemInLoan":8,"./prmLoginAfter/authentificationAutresInst":9,"./prmSearchBarAfter/showAlertMessage":10,"./prmSearchResultAvailabilityLineAfter/affDispo":11,"./prmSearchResultThumbnailContainerAfter/getThumbnail":12,"./prmTopbarAfter/message.service":13,"./prmTopbarAfter/prmTopbarAfter.component":14}],2:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.forceAuthConfig={bindings:{parentCtrl:"<"},controller:function t(){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),"true"==function(t,e){var n=t.indexOf("?");if(-1!==n)for(var i=t.substring(n+1).split("&"),r=0;r<i.length;r++){var a=i[r].split("=");if(decodeURIComponent(a.shift())==e)return decodeURIComponent(a.join("="))}}(this.parentCtrl.loginService.$location.$$absUrl,"forcelogin")){var e=this.parentCtrl.loginService.$location.$$absUrl.replace("&forcelogin=true","");e=encodeURIComponent(e);var n=this.parentCtrl.authenticationService.userSessionManagerService.inst,i=n+"_SAML_"+n.replace("33PUDB_",""),r="/primo_library/libweb/primoExploreLogin?institution="+n+"&lang=fr_FR&target-url="+e+"&authenticationProfile="+i;location.href=r}}}},{}],3:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.customBriefDisplayConfig={bindings:{parentCtrl:"<"},controller:function t(){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),"PC"==this.parentCtrl.item.context){var e=this.parentCtrl.otherLines,n=this.parentCtrl.item.pnx.display.creator,i=void 0!==this.parentCtrl.item.pnx.display.publisher?this.parentCtrl.item.pnx.display.publisher:this.parentCtrl.item.pnx.display.source,r=this.parentCtrl.item.pnx.display.creationdate;if(void 0===this.parentCtrl.item.pnx.display.ispartof){var a=i+" : "+r,o={values:[{clazz:"media-publisher",codes:[""],key:"publisher",text:[a],values:[a]}],delimiter:" ; "};e.unshift(o)}var s={values:[{clazz:"media-creator",codes:[""],key:"creator",text:n,values:n}],delimiter:" ; "};e.unshift(s)}if("L"==this.parentCtrl.item.context&&this.parentCtrl.item.pnx.control.recordid[0].startsWith("dedup"))for(var l=this.parentCtrl.otherLines,c=0;c<l.length;c++){if("lds01"==l[c].values[0].key){var u=l[c].values[0].text[0];l[c].values[0].text[0]=u.replace(/^(.*?)<br\/>.*/,"$1")}"lds02"==l[c].values[0].key&&(u=l[c].values[0].text[0],l[c].values[0].text[0]=u.replace(/^(.*?);.*/,"$1"))}}}},{}],4:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.logosInstsConfig={bindings:{parentCtrl:"<"},controller:function t(){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var i=new URL(document.location.href),e=(i.searchParams.get("lang"),i.pathname,i.searchParams.get("displayFooter")),r=i.searchParams.get("vid"),a=(i.searchParams.get("url_ver"),r.replace(/_VU./g,""));this.institutionsList=[],this.institutionsUrl={},this.displayFooter=!0,"false"==e&&(this.displayFooter=!1),this.parentCtrl.mappingTablesCache.MAPPING_TABLES_CACHE["Alma Institution Codes"].forEach(function(t){var e=t.source1;console.log(e),"33PUDB_NETWORK"!=e&&(new RegExp(a,"g"),n.institutionsList.push(e),n.institutionsUrl[e]="https://"+i.hostname+"search?vid="+e+"_VU1")}),this.message="Réseau des bibliothèques universitaires bordelaises",this.institutionsList.sort()},template:'<div class="footer" ng-if="$ctrl.displayFooter">\n    <div class="footer-inner">\n        <div class="footer-instruction">\n            {{$ctrl.message}}\n        </div>\n        <div class="footer-logo-alignement">\n            <a ng-repeat="almaInst in $ctrl.institutionsList" class="footer-logo"\n                href="{{$ctrl.institutionsUrl[almaInst]}}" title="{{almaInst|translate}}" target="_blank">\n                <img src="/primo-explore/custom/CENTRAL_PACKAGE/img/Logos/{{almaInst}}_Logo.png" />\n            </a>\n        </div>\n    </div>\n</div>'}},{}],5:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();var i=function(){function i(){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),console.log("----\x3e 33PUDB tLevelFacetteController"),"tlevel"==this.parentCtrl.facetGroup.name)for(var t=this.parentCtrl.facetGroup.values,e=0;e<t.length;e++){var n=t[e].value;["peer_reviewed","open_access","available"].includes(n)&&(t.splice(e,1),e-=1)}}return r(i,[{key:"recordid",get:function(){return this.parentCtrl.item.pnx.control.recordid[0]}}]),i}();n.tLevelFacetteConfig={bindings:{parentCtrl:"<"},controller:i}},{}],6:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();var i=function(){function i(t){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),console.log(this),this.sce=t,void 0!==this.parentCtrl.service&&(this.serviceName=this.parentCtrl.service.scrollId,"getit_link1_0"==this.serviceName&&"Alma-E"==this.parentCtrl.service.linkElement.category)){this.REBUB_vue=this.parentCtrl.configurationUtil.vid,this.REBUB_institution=this.parentCtrl.configurationUtil.vid.match(/(33PUDB_\S+?)_/)[1],this.institutionsLIst=[],this.dispos=this.parentCtrl.item.pnx.delivery.delcategory,this.isShowContent={};for(var e=0;e<this.dispos.length;e++){var n=this.dispos[e].match(/(\$\$V|^)(.*?)\$\$I(.*?)(\$|$)/);"Alma-E"==n[2]&&n[3]!=this.REBUB_institution&&"33PUDB_NETWORK"!=n[3]&&(this.institutionsLIst.push(n[3]),this.isShowContent[n[3]]=!1)}this.dispo_autres_inst=0<this.institutionsLIst.length}}return r(i,[{key:"showComponent",value:function(t){for(var e=t.match(/33PUDB_(.*)/)[1].toLowerCase(),n=t+"_VU1",i=this.parentCtrl.item.lang3?this.parentCtrl.item.lang3:"fre",r=(new Date).toISOString(),a=this.parentCtrl.item.pnx.control.almaid,o=this.parentCtrl.item.pnx.control.recordid[0].startsWith("dedup"),s=[],l=0;l<a.length;l++)if(o){var c=a[l].match(/\$\$V(.*?)\$\$O.*?_.*?_(.*?)\d/);"Marc"==c[2]&&s.push("ie="+c[1])}else s.push("ie="+a[l]);for(var l in this.openUrl="https://pudb-"+e+".userservices.exlibrisgroup.com/view/uresolver/"+t+"/openurl?ctx_enc=info:ofi/enc:UTF-8&ctx_id=10_1&ctx_tim="+r+"&ctx_ver=Z39.88-2004&url_ctx_fmt=info:ofi/fmt:kev:mtx:ctx&url_ver=Z39.88-2004&rfr_id=info:sid/primo.exlibrisgroup.com-33PUDB_Alma_Marc&req_id=&rft_dat="+s.toString()+",language="+i+",view="+this.REBUB_vue+"&svc_dat=viewit&u.ignore_date_coverage=true&is_new_ui=true&Force_direct=false&req.skin="+n,this.isShowContent)l!=t&&(this.isShowContent[l]=!1);this.isShowContent[t]=!this.isShowContent[t],this.templateURL="custom/CENTRAL_PACKAGE/js/prmFullViewServiceContainerAfter/bouttonAfficheDispoElec.html"}},{key:"trustAsUrl",value:function(t){return this.sce.trustAsResourceUrl(t)}}]),i}();i.$inject=["$sce"];n.dispoElecAutresInstConfig={bindings:{parentCtrl:"<"},controller:i,template:'<div ng-if="$ctrl.serviceName===\'getit_link1_0\' && $ctrl.dispo_autres_inst===true" class="33PUDB_Elec_autres_inst">\n    <h3 class="medium-uppercase-bold"> <span translate="nui.brief.results.tabs.getit_other">Get it from other\n            institutions</span> </h3>\n    <div ng-repeat="almaInst in $ctrl.institutionsLIst">\n        <button\n            class="neutralized-button layout-full-width layout-display-flex md-button md-primoExplore-theme md-ink-ripple"\n            type="button" ng-click="$ctrl.showComponent(almaInst); ">\n            <div layout="row" flex="100" layout-align="space-between center"\n                class="layout-align-space-between-center layout-row flex-100">\n                <div class="md-list-item-text">\n                    <h3 translate="{{almaInst}}">{{almaInst}}</h3>\n                    <p><span class="availability-status restricted" translate="delivery.code.restricted">Online access\n                            is restricted</span></p>\n                </div>\n                <prm-icon icon-type="svg" svg-icon-set="hardware" icon-definition="ic_keyboard_arrow_right_24px">\n                    <md-icon md-svg-icon="hardware:ic_keyboard_arrow_right_24px" alt="" class="md-primoExplore-theme"\n                        aria-hidden="true"></md-icon>\n                    <prm-icon-after parent-ctrl="$ctrl"></prm-icon-after>\n                </prm-icon>\n            </div>\n            <div class="md-ripple-container"></div>\n        </button>\n        <rebub-autres-abos rebub-etab="$ctrl.rebubEtab" ng-if="$ctrl.isShowContent[almaInst]">\n            <iframe iframe-onload="" class="mashup-iframe" ng-src="{{$ctrl.trustAsUrl($ctrl.openUrl)}}"\n                style="width: 100%; border: none; overflow: hidden; height: 105px;" id="iFrameResizer1" scrolling="no">\n            </iframe>\n            \x3c!-- <div ng-include src="$ctrl.templateURL"></div> --\x3e\n        </rebub-autres-abos>\n\n    </div>\n</div>'}},{}],7:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function t(o){var s=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),setTimeout(function(){s.$element=o,console.log("----\x3e33PUDB customGalleryDisplayController"),console.log(s);var t=void 0===s.parentCtrl.item.pnx.display.lds02?"":s.parentCtrl.item.pnx.display.lds02,e=void 0===s.parentCtrl.item.pnx.display.lds01?"":s.parentCtrl.item.pnx.display.lds01;console.log(s.$element[0].parentElement);var n=s.$element[0].parentElement.querySelector("div.item-info"),i=document.createElement("div");i.setAttribute("class","infoEx");var r=document.createElement("p");r.setAttribute("class","firstLine"),r.innerText=t,i.appendChild(r);var a=document.createElement("p");a.setAttribute("class","secondLine"),a.innerText=e,i.appendChild(a),n.appendChild(i)},1e3)};i.$inject=["$element"];n.customGalleryDisplayConfig={bindings:{parentCtrl:"<"},controller:i}},{}],8:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var f=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){r=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw a}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};var i=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),console.log("---\x3eitemInLoanController");var n,i,r,a=this.parentCtrl.item.loandate,o=this.parentCtrl.item.duedate,s=new Date,l=p(u(o),u(a)),c=p(s,u(a));function u(t){var e=/(\d{2})\/(\d{2})\/(\d{4})/.exec(t),n=f(e,4),i=n[1],r=n[2],a=n[3];return new Date(a,r-1,i)}function p(t,e){return Math.round(Math.abs((t.getTime()-e.getTime())/864e5))}7<l&&"Y"===this.parentCtrl.item.renew&&c<7&&(this.parentCtrl.item.renew="N",e.parent().children()[0].children[4].innerHTML=function(t){var e={fr_FR:"Prolongation impossible avant le ",en_US:"Not renewable before ",es_ES:"No renovable hasta "}[1<arguments.length&&void 0!==arguments[1]?arguments[1]:"fr_FR"]+t,n='<div class="not-renewable weak-text layout-align-start-center" aria-label="'+e;return n=(n+=' aria-hidden="false" layout-align="start center"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="lock">\x3c!----\x3e<md-icon ng-if="!$ctrl.isCustom" md-svg-icon="primo-ui:lock" alt="" class="md-primoExplore-theme" aria-hidden="true"><svg id="lock" width="100%" height="100%" viewBox="0 0 24 24" y="1320" xmlns="http://www.w3.org/2000/svg" fit="" preserveAspectRatio="xMidYMid meet" focusable="false"><path d="M12,17C10.89,17 10,16.1 10,15C10,13.89 10.89,13 12,13A2,2 0 0,1 14,15A2,2 0 0,1 12,17M18,20V10H6V20H18M18,8A2,2 0 0,1 20,10V20A2,2 0 0,1 18,22H6C4.89,22 4,21.1 4,20V10C4,8.89 4.89,8 6,8H7V6A5,5 0 0,1 12,1A5,5 0 0,1 17,6V8H18M12,3A3,3 0 0,0 9,6V8H15V6A3,3 0 0,0 12,3Z"></path>   </svg></md-icon>\x3c!----\x3e\x3c!----\x3e<prm-icon-after parent-ctrl="$ctrl"></prm-icon-after></prm-icon><span>')+e+"</span>\x3c!----\x3e</div>\x3c!----\x3e"}((n=s,i=c,(r=new Date).setDate(n.getDate()+(7-i)),r.toLocaleDateString()),this.parentCtrl.loansService.requestParams.lang)),this.parentCtrl.item._fullDisplayValues=[{key:"loan_date",value:this.parentCtrl.item.loandate},{key:"max_renew_date",value:this.parentCtrl.item.maxrenewdate}]};i.$inject=["$element"];n.itemInLoanConfig={bindings:{parentCtrl:"<"},controller:i}},{}],9:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.hostAuth=this.parentCtrl.$location.$$host,"/login"==this.parentCtrl.$location.$$path?this.absUrl="https://"+this.hostAuth+"/primo-explore/account?vid=33PUDB_UBM_VU1&section=overview":this.absUrl=this.parentCtrl.$location.$$absUrl,this.absUrl=encodeURIComponent(this.absUrl),this.sourceView=this.parentCtrl.$location.$$search.vid,this.langue=this.parentCtrl.$stateParams.lang,this.auth_base_url_const="https://"+this.hostAuth+"/primo_library/libweb/primoExploreLogin?institution=",this.PUDB_Auth_Lists=[["1","33PUDB_BXSA","33PUDB_BXSA_SAML_BXSA",this.absUrl.replace(/vid\%3D33PUDB_.*_VU1/,"vid%3D33PUDB_BXSA_VU1"),"33PUDB_BXSA_VU1","Bordeaux Sciences Agro"],["2","33PUDB_IEP","33PUDB_IEP_SAML_IEP",this.absUrl.replace(/vid\%3D33PUDB_.*_VU1/,"vid%3D33PUDB_IEP_VU1"),"33PUDB_IEP_VU1","Bordeaux Sciences Po"],["3","33PUDB_UB","33PUDB_UB_SAML_UB",this.absUrl.replace(/vid\%3D33PUDB_.*_VU1/,"vid%3D33PUDB_UB_VU1"),"33PUDB_UB_VU1","Université de Bordeaux"],["4","33PUDB_UBM","33PUDB_UBM_SAML_UBM",this.absUrl.replace(/vid\%3D33PUDB_.*_VU1/,"vid%3D33PUDB_UBM_VU1"),"33PUDB_UBM_VU1","Université Bordeaux Montaigne"],["5","33PUDB_INP","33PUDB_INP_SAML_INP",this.absUrl.replace(/vid\%3D33PUDB_.*_VU1/,"vid%3D33PUDB_INP_VU1"),"33PUDB_INP_VU1","Bordeaux INP"]]}return i(t,[{key:"setIdPShow",value:function(t){return Boolean(this.parentCtrl.usernamePasswordLoginService.inst!==t)}}]),t}();n.authentificationAutresInstConfig={bindings:{parentCtrl:"<"},controller:r,template:'<h2 class="md-headline light-text layout-align-center-center layout-row flex"><span translate="">Membre d\'un autre\n    &#233;tablissement du r&#233;seau Bordelais? </span></h2>\n<p class="layout-align-center-center layout-row flex">Authentifiez-vous sur votre Babord + pour profiter d\'un service\n    optimis&#233;</p>\n<div id="REBUB-Authentification-Ext" layout="raw">\n    <md-list-item ng-repeat="PUDB_Auth_List in $ctrl.PUDB_Auth_Lists" ng-show="$ctrl.setIdPShow(\'{{PUDB_Auth_List[1]}}\')"\n        class="rebub-authentification-externe">\n        <a ng-href="{{$ctrl.auth_base_url_const}}{{PUDB_Auth_List[1]}}&lang=fr_FR&target-url={{PUDB_Auth_List[3]}}&authenticationProfile={{PUDB_Auth_List[2]}}"\n            &auth=SAML&isSilent=false"\n            ng-attr-title="Après vous être authentifié sur le portail de {{PUDB_Auth_List[5]}} vous serez redirigé vers le Babord + de l\'institution">\n            <img class="rebub-logo" ng-src="custom/CENTRAL_PACKAGE/img/Logos/{{PUDB_Auth_List[1]}}_Logo.png"\n                ng-attr-alt="Logo de  {{PUDB_Auth_List[5]}}">\n        </a>\n    </md-list-item>\n</div>'}},{}],10:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),console.log("--\x3e show alert message !"),console.log(this)};i.$inject=["$element"];n.showAlertMessageConfig={bindings:{parentCtrl:"<"},controller:i,template:'<div layout="row" class="bar alert-bar layout-align-center-center layout-row" layout-align="center center"">\n    <span class="bar-text">Message d\'alerte</span>\n<md-divider class="md-primoExplore-theme"></md-divider><button class="dismiss-alert-button zero-margin md-button md-primoExplore-theme md-ink-ripple button-with-icon" type="button" ng-transclude="" aria-label="DISMISS" (click)="$ctrl.onClose()" ng-class="$ctrl.mediaQueries.xs ? \'md-icon-button\' : \'button-with-icon\' "><prm-icon icon-type="svg" svg-icon-set="navigation" icon-definition="ic_close_24px">\x3c!----\x3e<md-icon ng-if="::(!$ctrl.isCustom &amp;&amp; !$ctrl.isEmailMode())" md-svg-icon="navigation:ic_close_24px" alt="" class="md-primoExplore-theme" aria-hidden="true"><svg width="100%" height="100%" viewBox="0 0 24 24" id="ic_close_24px" y="240" xmlns="http://www.w3.org/2000/svg" fit="" preserveAspectRatio="xMidYMid meet" focusable="false"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg></md-icon>\x3c!----\x3e\x3c!----\x3e<prm-icon-after parent-ctrl="$ctrl"></prm-icon-after></prm-icon><span translate="nui.message.dismiss" hide-xs="" class="hide-xs">DISMISS</span></button></div>\x3c!----\x3e</div>\x3c!----\x3e'}},{}],11:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function t(e,n,i,r){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),console.log("----\x3eaffDispoController"),this.parentCtrl.result.pnx.control.recordid[0].startsWith("dedup")&&1==this.parentCtrl.result.delivery.deliveryCategory.length){if(void 0!==this.parentCtrl.result.delivery.GetIt2){console.log("----\x3eaffDispoController : recalcule de la disponibilité");var a=function(t){if(console.log(t),void 0===t||null==t)return"unavailable_in_all_institutions";for(var e=[],n=0;n<t.length;n++)t[n].isValidUser&&e.push(t[n].availabilityStatus);return 0==e.length?"does_not_exist_in_maininstitution":e.includes("available")?"available_in_maininstitution":"check_holdings"}(this.parentCtrl.result.delivery.holding);this.locations=[],this.locations.push({availability:a,deliveryCode:"delivery.code."+a,useLinkIcon:!0})}console.log(this.locations)}console.log(this)};i.$inject=["$scope","$http","$element","$templateCache"];n.affDispoConfig={bindings:{parentCtrl:"<"},controller:i,template:'<div ng-repeat="availability in $ctrl.locations" layout="row" layout-align="start start">\n    <div layout="row" layout-align="start start"\n        class="layout-align-start-start layout-row avail-row {{availability.availability}}">\n        <prm-icon availability-type icon-type="{{$ctrl.parentCtrl.availabilityLineIcons.physicalMaterial.type}}"\n            svg-icon-set="{{$ctrl.parentCtrl.availabilityLineIcons.physicalMaterial.iconSet}}"\n            icon-definition="{{$ctrl.parentCtrl.availabilityLineIcons.physicalMaterial.icon}}"></prm-icon>\n        <md-button prm-brief-internal-button-marker\n            ng-click="$ctrl.parentCtrl.handleAvailability($index, $event);$event.preventDefault();"\n            class="neutralized-button arrow-link-button"\n            aria-label="{{$ctrl.parentCtrl.getTranslatedLine(availability.deliveryCode)}}"\n            title="{{$ctrl.parentCtrl.getTranslatedLine(availability.deliveryCode)}}">\n            <span class="button-content">\n                <span class="availability-status {{availability.availability}}"\n                    ng-class="{\'text-rtl\': $ctrl.parentCtrl.switchToLtrString()}"\n                    translate="{{availability.deliveryCode}}"\n                    translate-values="$ctrl.parentCtrl.getPlaceHolders($ctrl.result)" \n                    translate-compile>\n                </span>\n            </span>\n            <prm-spinner class="inline-loader display-inline dark-on-light half-transparent"\n                ng-if="$ctrl.result.rtaInProgress"></prm-spinner>\n            <prm-icon link-arrow icon-type="{{$ctrl.parentCtrl.availabilityLineIcons.arrowRight.type}}"\n                svg-icon-set="{{$ctrl.parentCtrl.availabilityLineIcons.arrowRight.iconSet}}"\n                icon-definition="{{$ctrl.parentCtrl.availabilityLineIcons.arrowRight.icon}}"></prm-icon>\n        </md-button>\n    </div>\n</div>'}},{}],12:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();var r=function(){function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.$http=t,this.$element=e,console.log("----\x3ethumbnail link"),console.log(this.parentCtrl)}return i(n,[{key:"$onInit",value:function(){}}]),n}();r.$inject=["$http","$element"];n.getThumbnailConfig={bindings:{parentCtrl:"<"},controller:r,template:'<div ng-if="$ctrl.electreThumbnailLink">\n    <img class="main-img fan-img-1" ng-if="$ctrl.electreThumbnailLink" ng-src="{{$ctrl.electreThumbnailLink}}" aria-label="Cover {{\' \'}}{{\'nui.mediatype.image\' | translate}}" alt=""/>\n </div>\n<div ng-if="$ctrl.links" ng-init="$ctrl.go()"></div>'}},{}],13:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();(n.MessageService=function(){function a(t,e,n,i){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),this.$translate=t,this.$mdToast=e,this.$rootScope=n,this.$cookies=i,this._dismissed=!1,this.$rootScope.$on("$translateChangeSuccess",function(){r._dismissed=!1}),console.log("--\x3e MESSAGE !!!"),console.log(this)}return i(a,[{key:"_dismiss",value:function(){this._dismissed=!0,this._toastPromise=null}},{key:"display",value:function(i){var r=this;return new Promise(function(e,n){!0!==r._dismissed?r.$translate("default.nui.message.annoucement").then(function(t){if(console.log("YOplà !!!"),r.$cookies.get("announcement")!==t){if(!t||["announcement","&nbsp;",""].includes(t))return r._toastPromise&&!r._dismissed&&r.$mdToast.hide(),void n("Pas de message trouvé .");r._toastPromise=r._toastPromise||r.$mdToast.show({hideDelay:!1,position:"top",controller:function(){return{close:function(){r.$mdToast.hide(),r.$translate("default.nui.message.annoucement").then(function(t){return r.$cookies.put("announcement",t)})}}},controllerAs:"$ctrl",template:'\n  <md-toast class="page-notification" style="top: 0px; position: sticky !important;">\n      <div class="md-toast-content" style="box-shadow:none; width: 100%;">\n          <span class=\'md-toast-text\' flex translate=\'nui.message.announcement\'>\n    </span>\n      </div>\n      <a class="close" ng-click=\'$ctrl.close()\' aria-label="{{\'nui.message.dismiss\' | translate}}"\n         style="position: absolute; right: 1.5rem; top: 1.5rem;">\n          <prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="close">\n          </prm-icon>\n      </a>\n  </md-toast>\n            '}),r._toastPromise.then(i).catch(i).then(function(){return r._dismiss()}),e()}else n("The announcement has been dismissed before.")}):n("The announcement has been dismissed.")})}}]),a}()).$inject=["$translate","$mdToast","$rootScope","$cookies"]},{}],14:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();var r=function(){function r(t,e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.messageService=t,this.$scope=e,this.$element=n,this.$translate=i}return i(r,[{key:"$onInit",value:function(){new URL(document.location.href);this.messageService.display().catch(function(t){t&&console.log(t)})}}]),r}();r.$inject=["messageService","$scope","$element","$translate"];n.PrmTopbarAfterConfig={name:"prmTopbarAfter",config:{controller:r,require:{primoExploreCtrl:"^primoExplore"}}}},{}]},{},[1]);
//# sourceMappingURL=custom.js.map
