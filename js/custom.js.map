{"version":3,"sources":["node_modules/browser-pack/_prelude.js","primo-explore/custom/CENTRAL_PACKAGE/js/main.js","primo-explore/custom/CENTRAL_PACKAGE/js/prmFacetExactAfter/customTLevelFacette.js","primo-explore/custom/CENTRAL_PACKAGE/js/prmLoginAfter/authentificationAutresInst.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","_customTLevelFacette","_authentificationAutresInst","app","angular","component","tLevelFacetteConfig","authentificationAutresInstConfig","tLevelFacetteController","_classCallCheck","this","console","log","parentCtrl","facetGroup","name","tlevelFacetsValues","values","facetName","value","includes","splice","item","pnx","control","recordid","bindings","controller","authentificationAutresInstController","hostAuth","$location","$$host","$$path","absUrl","$$absUrl","encodeURIComponent","sourceView","$$search","vid","langue","$stateParams","lang","auth_base_url_const","PUDB_Auth_Lists","replace","institution","Boolean","usernamePasswordLoginService","inst","template"],"mappings":"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","file":"custom.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","import {tLevelFacetteConfig} from './prmFacetExactAfter/customTLevelFacette'\nimport {authentificationAutresInstConfig} from './prmLoginAfter/authentificationAutresInst'\n\nlet app = angular.module('centralCustom',[]);\nif (app){\n    app.component('prmFacetExactAfter', tLevelFacetteConfig);\n    app.component('prmLoginAfter', authentificationAutresInstConfig);\n}","\n/*[33PUDB_NETWORK_AFA] - Customisation de la toplevel facette  */\n/*Suprime les entrées 'peer_reviewed','open_access'et'available'*/\nclass tLevelFacetteController {\n  constructor(){\n    console.log('----> 33PUDB tLevelFacetteController');\n    var facetType = this.parentCtrl.facetGroup.name; \n    /*Filtre sur la top level facette*/\n    if (facetType == \"tlevel\"){\n        /*Récupère les valeurs de la tlevel facette*/\n        var tlevelFacetsValues = this.parentCtrl.facetGroup.values;\n        console.log(tlevelFacetsValues);\n        /*Parcours du tableau des valeurs*/\n        for (var i = 0; i < tlevelFacetsValues.length; i++) {\n            /*Récupère le nom de la facette*/\n            var facetName = tlevelFacetsValues[i].value;\n            console.log(facetName);\n            /*On supprime les entrées relatives à la tlevel*/\n            if (['peer_reviewed', 'open_access', 'available'].includes(facetName)) {\n                tlevelFacetsValues.splice(i, 1);\n                i = i - 1;\n                console.log(\"Supprimée\");\n            }\n        }\n    }\n  }\n\n  get recordid() {\n    return this.parentCtrl.item.pnx.control.recordid[0];\n  }\n}\n\nexport let tLevelFacetteConfig = {\n  bindings: {parentCtrl:'<'},\n  controller: tLevelFacetteController,\n}\n","import authentificationForm from './authentificationAutresInst.html'\n\nclass authentificationAutresInstController {\n    constructor() {\n        //Debug\n        console.log('---->authentificationAutresInstController');\n        //DEBUG\n        // console.log(this);\n        //On recupere le host\n        this.hostAuth = this.parentCtrl.$location.$$host;\n        // console.log(\"hostAuth:\" + this.hostAuth);\n        //On récupère l'URL de départ :\n        //[AFA Patch 20/02/2019 : https://trello.com/c/Vsm7VgdA ] On teste le chemin car quand on arrive de l'extérieur et que la page ciblée demande une authentification fournie $$absurl est l'url de l'écran de login. Pour l'instant les seuls liens externes de cetypes pointent vers le compte lecteur. Donc si $$absUrl pointe vers l'écran de login on redirge vers  \n        if (this.parentCtrl.$location.$$path == \"/login\") {\n            this.absUrl = 'https://' + this.hostAuth + '/primo-explore/account?vid=33PUDB_UBM_VU1&section=overview';\n            //URL pour le travail en localhost\n            //this.absUrl = 'https://babordplus.hosted.exlibrisgroup.com/primo-explore/account?vid=33PUDB_UBM_VU1&section=overview';\n        }\n        else {\n            this.absUrl = this.parentCtrl.$location.$$absUrl;\n        }\n        //On encode correctement l'URL targeturl \n        this.absUrl = encodeURIComponent(this.absUrl);\n        // console.log(\"absUrl:\" + this.absUrl);\n        //On recupere le code vue source\n        this.sourceView = this.parentCtrl.$location.$$search.vid;\n        // console.log(\"sourceView:\" + this.sourceView);\n        //On récupére la langue de la session\n        this.langue = this.parentCtrl.$stateParams.lang;\n        //On contruit le debut de l'url pour l authentification\n        this.auth_base_url_const = 'https://' + this.hostAuth + '/primo_library/libweb/primoExploreLogin?institution=';\n        //URL Pour tester en local\n        // this.auth_base_url_const = 'https://babordplus.hosted.exlibrisgroup.com/primo_library/libweb/primoExploreLogin?institution=' ;\n        //Parcours d'une liste asso pour afficher auth IdP supplementaires\n        this.PUDB_Auth_Lists =  [\n                                    [\"1\", \"33PUDB_BXSA\", \"33PUDB_BXSA_SAML_BXSA\", this.absUrl.replace(/vid\\%3D33PUDB_.*_VU1/, \"vid%3D33PUDB_BXSA_VU1\"), \"33PUDB_BXSA_VU1\", \"Bordeaux Sciences Agro\"], \n                                    [\"2\", \"33PUDB_IEP\", \"33PUDB_IEP_SAML_IEP\", this.absUrl.replace(/vid\\%3D33PUDB_.*_VU1/, \"vid%3D33PUDB_IEP_VU1\"), \"33PUDB_IEP_VU1\", \"Bordeaux Sciences Po\"],\n                                    [\"3\", \"33PUDB_UB\", \"33PUDB_UB_SAML_UB\", this.absUrl.replace(/vid\\%3D33PUDB_.*_VU1/, \"vid%3D33PUDB_UB_VU1\"), \"33PUDB_UB_VU1\", \"Université de Bordeaux\"],\n                                    [\"4\", \"33PUDB_UBM\", \"33PUDB_UBM_SAML_UBM\", this.absUrl.replace(/vid\\%3D33PUDB_.*_VU1/, \"vid%3D33PUDB_UBM_VU1\"), \"33PUDB_UBM_VU1\", \"Université Bordeaux Montaigne\"], \n                                    [\"5\", \"33PUDB_INP\", \"33PUDB_INP_SAML_INP\", this.absUrl.replace(/vid\\%3D33PUDB_.*_VU1/, \"vid%3D33PUDB_INP_VU1\"), \"33PUDB_INP_VU1\", \"Bordeaux INP\"]];\n    }\n\n    setIdPShow(institution) {\n        //Le lien n'est pas proposé pour l'inst\n        // console.log(institution);\n        return Boolean(this.parentCtrl.usernamePasswordLoginService.inst !== institution);\n\n    }\n}\n\nexport let authentificationAutresInstConfig = {\n    bindings: { parentCtrl: '<' },\n    controller: authentificationAutresInstController,\n    template: authentificationForm\n}"],"sourceRoot":"/source/"}